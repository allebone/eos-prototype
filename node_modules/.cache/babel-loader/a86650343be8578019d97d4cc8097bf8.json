{"remainingRequest":"/home/beskar/eos-prototype-users/node_modules/thread-loader/dist/cjs.js!/home/beskar/eos-prototype-users/node_modules/babel-loader/lib/index.js!/home/beskar/eos-prototype-users/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/beskar/eos-prototype-users/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/beskar/eos-prototype-users/src/views/apps/chat/ChatLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/beskar/eos-prototype-users/src/views/apps/chat/ChatLog.vue","mtime":1609867154633},{"path":"/home/beskar/eos-prototype-users/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/beskar/eos-prototype-users/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/beskar/eos-prototype-users/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/beskar/eos-prototype-users/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/beskar/eos-prototype-users/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCB7IEJBdmF0YXIgfSBmcm9tICdib290c3RyYXAtdnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJBdmF0YXI6IEJBdmF0YXIKICB9LAogIHByb3BzOiB7CiAgICBjaGF0RGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcHJvZmlsZVVzZXJBdmF0YXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzKSB7CiAgICB2YXIgZm9ybWF0dGVkQ2hhdERhdGEgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBjb250YWN0ID0gewogICAgICAgIGlkOiBwcm9wcy5jaGF0RGF0YS5jb250YWN0LmlkLAogICAgICAgIGF2YXRhcjogcHJvcHMuY2hhdERhdGEuY29udGFjdC5hdmF0YXIKICAgICAgfTsKICAgICAgdmFyIGNoYXRMb2cgPSBbXTsKCiAgICAgIGlmIChwcm9wcy5jaGF0RGF0YS5jaGF0KSB7CiAgICAgICAgY2hhdExvZyA9IHByb3BzLmNoYXREYXRhLmNoYXQuY2hhdDsKICAgICAgfQoKICAgICAgdmFyIGZvcm1hdHRlZENoYXRMb2cgPSBbXTsKICAgICAgdmFyIGNoYXRNZXNzYWdlU2VuZGVySWQgPSBjaGF0TG9nWzBdID8gY2hhdExvZ1swXS5zZW5kZXJJZCA6IHVuZGVmaW5lZDsKICAgICAgdmFyIG1zZ0dyb3VwID0gewogICAgICAgIHNlbmRlcjogY2hhdE1lc3NhZ2VTZW5kZXJJZCwKICAgICAgICBtZXNzYWdlczogW10KICAgICAgfTsKICAgICAgY2hhdExvZy5mb3JFYWNoKGZ1bmN0aW9uIChtc2csIGluZGV4KSB7CiAgICAgICAgaWYgKGNoYXRNZXNzYWdlU2VuZGVySWQgPT09IG1zZy5zZW5kZXJJZCkgewogICAgICAgICAgbXNnR3JvdXAubWVzc2FnZXMucHVzaCh7CiAgICAgICAgICAgIG1zZzogbXNnLm1lc3NhZ2UsCiAgICAgICAgICAgIHRpbWU6IG1zZy50aW1lCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2hhdE1lc3NhZ2VTZW5kZXJJZCA9IG1zZy5zZW5kZXJJZDsKICAgICAgICAgIGZvcm1hdHRlZENoYXRMb2cucHVzaChtc2dHcm91cCk7CiAgICAgICAgICBtc2dHcm91cCA9IHsKICAgICAgICAgICAgc2VuZGVySWQ6IG1zZy5zZW5kZXJJZCwKICAgICAgICAgICAgbWVzc2FnZXM6IFt7CiAgICAgICAgICAgICAgbXNnOiBtc2cubWVzc2FnZSwKICAgICAgICAgICAgICB0aW1lOiBtc2cudGltZQogICAgICAgICAgICB9XQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGlmIChpbmRleCA9PT0gY2hhdExvZy5sZW5ndGggLSAxKSBmb3JtYXR0ZWRDaGF0TG9nLnB1c2gobXNnR3JvdXApOwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBmb3JtYXR0ZWRDaGF0TG9nOiBmb3JtYXR0ZWRDaGF0TG9nLAogICAgICAgIGNvbnRhY3Q6IGNvbnRhY3QsCiAgICAgICAgcHJvZmlsZVVzZXJBdmF0YXI6IHByb3BzLnByb2ZpbGVVc2VyQXZhdGFyCiAgICAgIH07CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGZvcm1hdHRlZENoYXREYXRhOiBmb3JtYXR0ZWRDaGF0RGF0YQogICAgfTsKICB9Cn07"},{"version":3,"sources":["ChatLog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,SAAA,QAAA,QAAA,sBAAA;AACA,SAAA,OAAA,QAAA,eAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GADA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,iBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AALA,GAJA;AAcA,EAAA,KAdA,iBAcA,KAdA,EAcA;AACA,QAAA,iBAAA,GAAA,QAAA,CAAA,YAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,EAAA,EAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,EADA;AAEA,QAAA,MAAA,EAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AAFA,OAAA;AAKA,UAAA,OAAA,GAAA,EAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,IAAA,EAAA;AACA,QAAA,OAAA,GAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA;;AAEA,UAAA,gBAAA,GAAA,EAAA;AACA,UAAA,mBAAA,GAAA,OAAA,CAAA,CAAA,CAAA,GAAA,OAAA,CAAA,CAAA,CAAA,CAAA,QAAA,GAAA,SAAA;AACA,UAAA,QAAA,GAAA;AACA,QAAA,MAAA,EAAA,mBADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAAA;AAKA,MAAA,OAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA,KAAA,EAAA;AACA,YAAA,mBAAA,KAAA,GAAA,CAAA,QAAA,EAAA;AACA,UAAA,QAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AACA,YAAA,GAAA,EAAA,GAAA,CAAA,OADA;AAEA,YAAA,IAAA,EAAA,GAAA,CAAA;AAFA,WAAA;AAIA,SALA,MAKA;AACA,UAAA,mBAAA,GAAA,GAAA,CAAA,QAAA;AACA,UAAA,gBAAA,CAAA,IAAA,CAAA,QAAA;AACA,UAAA,QAAA,GAAA;AACA,YAAA,QAAA,EAAA,GAAA,CAAA,QADA;AAEA,YAAA,QAAA,EAAA,CAAA;AACA,cAAA,GAAA,EAAA,GAAA,CAAA,OADA;AAEA,cAAA,IAAA,EAAA,GAAA,CAAA;AAFA,aAAA;AAFA,WAAA;AAOA;;AACA,YAAA,KAAA,KAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA,gBAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAlBA;AAoBA,aAAA;AACA,QAAA,gBAAA,EAAA,gBADA;AAEA,QAAA,OAAA,EAAA,OAFA;AAGA,QAAA,iBAAA,EAAA,KAAA,CAAA;AAHA,OAAA;AAKA,KA3CA,CAAA;AA6CA,WAAA;AACA,MAAA,iBAAA,EAAA;AADA,KAAA;AAGA;AA/DA,CAAA","sourcesContent":["<template>\n  <div class=\"chats\">\n    <div\n      v-for=\"(msgGrp, index) in formattedChatData.formattedChatLog\"\n      :key=\"msgGrp.senderId+String(index)\"\n      class=\"chat\"\n      :class=\"{'chat-left': msgGrp.senderId === formattedChatData.contact.id}\"\n    >\n      <div class=\"chat-avatar\">\n        <b-avatar\n          size=\"36\"\n          class=\"avatar-border-2 box-shadow-1\"\n          variant=\"transparent\"\n          :src=\"msgGrp.senderId === formattedChatData.contact.id ? formattedChatData.contact.avatar : profileUserAvatar\"\n        />\n      </div>\n      <div class=\"chat-body\">\n        <div\n          v-for=\"msgData in msgGrp.messages\"\n          :key=\"msgData.time\"\n          class=\"chat-content\"\n        >\n          <p>{{ msgData.msg }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed } from '@vue/composition-api'\nimport { BAvatar } from 'bootstrap-vue'\n\nexport default {\n  components: {\n    BAvatar,\n  },\n  props: {\n    chatData: {\n      type: Object,\n      required: true,\n    },\n    profileUserAvatar: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const formattedChatData = computed(() => {\n      const contact = {\n        id: props.chatData.contact.id,\n        avatar: props.chatData.contact.avatar,\n      }\n\n      let chatLog = []\n      if (props.chatData.chat) {\n        chatLog = props.chatData.chat.chat\n      }\n\n      const formattedChatLog = []\n      let chatMessageSenderId = chatLog[0] ? chatLog[0].senderId : undefined\n      let msgGroup = {\n        sender: chatMessageSenderId,\n        messages: [],\n      }\n\n      chatLog.forEach((msg, index) => {\n        if (chatMessageSenderId === msg.senderId) {\n          msgGroup.messages.push({\n            msg: msg.message,\n            time: msg.time,\n          })\n        } else {\n          chatMessageSenderId = msg.senderId\n          formattedChatLog.push(msgGroup)\n          msgGroup = {\n            senderId: msg.senderId,\n            messages: [{\n              msg: msg.message,\n              time: msg.time,\n            }],\n          }\n        }\n        if (index === chatLog.length - 1) formattedChatLog.push(msgGroup)\n      })\n\n      return {\n        formattedChatLog,\n        contact,\n        profileUserAvatar: props.profileUserAvatar,\n      }\n    })\n\n    return {\n      formattedChatData,\n    }\n  },\n}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":"src/views/apps/chat"}]}